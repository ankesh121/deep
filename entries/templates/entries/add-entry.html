{% extends 'base.html' %}
{% load staticfiles %}

{% block title %}
DEEP | {% if entry %}Edit{% else %}Add{% endif %} Entry
{% endblock %}

{% block head %}

<link href="{% static 'css/add-entry.css' %}" type="text/css" rel="stylesheet">
<link href="{% static 'css/navigation-bar.css' %}" type="text/css" rel="stylesheet">
<link href="{% static 'css/selectize.css' %}" type="text/css" rel="stylesheet">
<link href="{% static 'css/selectize.bootstrap3.css' %}" type="text/css" rel="stylesheet">
<link href="{% static 'css/split-pane.css' %}" type="text/css" rel="stylesheet">

<script type="text/javascript" src="{% static 'js/selectize.js' %}"></script>
<script type="text/javascript" src="{% static 'js/split-pane.js' %}"></script>

<script type="text/javascript" src="{% static 'js/utils.js' %}"></script>

<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>

<script>
    var text_style = "<style>body{font-family: 'Lato', sans-serif; font-size: 13px; background-color: #fafafa; color: #717171;}body div{padding: 24px; white-space: pre-wrap; line-height: 1.5;}</style>";
{% if lead %}
    var lead_type = '{{lead.lead_type}}';
    {% if lead.url %}var lead_url = '{{lead.url}}';{% endif %}
    {% if lead.description %}var lead_description = "{{lead.description|escapejs}}";{% endif %}
    {% if lead.attachment %}var lead_attachment = "{{lead.attachment.upload.url}}";{% endif %}
{% else %}
    var lead_type = '';
{% endif %}
    var lead_simplified = "{% if lead_simplified %}{{lead_simplified|escapejs}}{% endif %}";

    lead_description = lead_description.replace(/(?:\r\n|\r|\n)/g, '<br />');
    lead_simplified = lead_simplified.replace(/(?:\r\n|\r|\n)/g, '<br />');


    var tags = {"one": ["we", "all"], "two": ["foolish", "apes"], "three": ["jackerwobly"]};
    var selectedTags = {};
    var isSimplified;
</script>

{% endblock %}

{% block body %}

{% include 'navigation-bar.html' %}

<div class="split-pane fixed-left">

    <div class="split-pane-component" id="left-component">
        {% if lead_simplified %}
        <div id="lead-options-container">
            <label class="radio-inline"><input type="radio" name="lead-view-option" value="simplified" checked>Simplified</label>
            <label class="radio-inline"><input type="radio" name="lead-view-option" value="original">Original</label>
            <div id="tag-buttons"></div>
        </div>
        {% endif %}
        <div id="lead-preview-container">
            <iframe id="lead-preview" src="data:text/html;charset=utf-8,No preview available"></iframe>
        </div>
    </div>

    <div class="split-pane-divider" id="my-divider"></div>

    <div class="split-pane-component" id="right-component">
        <div id="the-map" style="height:350px;"></div>

        <select name="country" id="country" placeholder="Select a country">
            <option value="">Select a country</option>
            {% for country in countries %}
            <option value="{{country.pk}}" {% if entry and entry.country == country %}selected{% endif %}>{{country.name}}</option>
            {% endfor %}
        </select>

        <div id="admin-level-buttons"></div>


        <div class="tree">
        	<ul>
        		<li>
        			<a href="#">All Population</a>
        			<ul>
        				<li>
        					<a href="#">Affected</a>
                            <ul>
        						<li>
                                    <a href="#">Displaced</a>
                                    <ul>
        								<li><a href="#">IDP</a></li>
                                        <li><a href="#">Refugees</a></li>
                                        <li><a href="#">Asylum Seekers</a></li>
                                        <li><a href="#">Returnees</a></li>
                                        <li><a href="#">Others of Concern</a></li>

        							</ul>
                                </li>
        						<li>
        							<a href="#">Non-Displaced</a>
                                    <ul>
                                        <li><a href="#">Host</a></li>
                                        <li><a href="#">Non-Host</a></li>
                                    </ul>
        						</li>

        					</ul>
        				</li>
        				<li>
        					<a href="#">Non-Affected</a>

        				</li>
        			</ul>
        		</li>
        	</ul>
        </div>

    </div>
</div>

<script src="{% static 'js/add-entry.js' %}"></script>
<script src="{% static 'js/add-entry-map.js' %}"></script>

{% endblock %}
