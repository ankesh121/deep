{% extends 'base.html' %}
{% load staticfiles %}

{% block title %}
DEEP | Entries
{% endblock %}

{% block head %}

<link href="{% static 'css/entries.css' %}" type="text/css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="{% static 'css/selectize.css' %}"/>
<link rel="stylesheet" type="text/css" href="{% static 'css/selectize.bootstrap3.css' %}"/>
<script type="text/javascript" src="{% static 'js/datatables.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/selectize.js' %}"></script>
<script type="text/javascript" src="{% static 'js/split.js' %}"></script>
<script type="text/javascript" src="{% static 'js/utils.js' %}"></script>
<script type="text/javascript" src="{% static 'js/entries.js' %}"></script>

<script>
    var eventId = "{{event.pk}}";
    var csrf_token = "{% csrf_token %}";
</script>

{% endblock %}

{% block body %}

{% include 'navbar.html' %}

<section id="main">
    <div class="container-fluid">
        <h2>Current Entries</h2>
        <div id="filters">
            <div class="row">
                <div class="col-sm-12">
                    <label>Apply filter:</label>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-3 col-md-2 col-xs-6" hidden>
                    <select id="date-modified-filter" placeholder="Date Modified">
                        <option value="">Date Modified</option>
                        <option value="today">Today</option>
                        <option value="yesterday">Yesterday</option>
                        <option value="last-seven-days">Last 7 days</option>
                        <option value="this-week">This week</option>
                        <option value="last-thirty-days">Last 30 days</option>
                        <option value="this-month">This month</option>
                        <option value="range">Range</option>
                    </select>
                </div>

                <div class="col-md-8">
                    <div class="row">
                        <div class="col-md-2">
                            <select id="users-filter" placeholder="Users">
                                <option value="">Users</option>
                                {% for u in users %}
                                <option value="{{u.pk}}">{{u.get_full_name}}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-md-2">
                            <select id="areas-filter" placeholder="Areas">
                                <option value="">Areas</option>
                                {% for area in areas %}
                                <option value="{{area}}">{{area}}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-md-2">
                            <select id="affected-groups-filter" placeholder="Affected Groups">
                                <option value="">Affected Groups</option>
                                {% for group in affected_groups %}
                                <option value="{{group}}">{{group}}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-md-2">
                            <select id="vulnerable-groups-filter" placeholder="Vulnerable groups">
                                <option value="">Vulnerable groups</option>
                                {% for vulnerable_group in vulnerable_groups %}
                                <option value="{{vulnerable_group}}">{{vulnerable_group}}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-md-2">
                            <select id="specific-needs-groups-filter" placeholder="Specific Needs Groups">
                                <option value="">Specific Needs Groups</option>
                                {% for group in specific_needs_groups %}
                                <option value="{{group}}">{{group}}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-md-2">
                            <select id="pillars-filter" placeholder="Pillars">
                                <option value="">Pillars</option>
                                {% for pillar in pillars %}
                                <option value="{{pillar.pk}}">{{pillar}}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-md-2">
                            <select id="subpillars-filter" placeholder="Subpillars">
                                <option value="">Subpillars</option>
                                {% for subpillar in subpillars %}
                                <option value="{{subpillar.pk}}">{{subpillar}}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-md-2">
                            <select id="sectors-filter" placeholder="Sectors">
                                <option value="">Sectors</option>
                                {% for sector in sectors %}
                                <option value="{{sector.pk}}">{{sector}}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-md-2">
                            <select id="subsectors-filter" placeholder="Subsectors">
                                <option value="">Subsectors</option>
                                {% for subsector in subsectors %}
                                <option value="{{subsector.pk}}">{{subsector}}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <!-- Insert new filter here inside following container
                        <div class="col-md-2">
                        </div> -->

                        <div class="col-md-2">
                            <input id="search" class="form-control" placeholder="Search excerpt">
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="row">
                        <div class="col-md-6">
                            <label>Reliability</label>
                            <div class="row">
                                <div class="col-md-6">
                                    <select id="reliabilities-min-filter" class="reliabilities-filter" placeholder="from">
                                        <option value="">from</option>
                                        {% for reliability in reliabilities %}
                                        <option value="{{reliability.level}}">{{reliability}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <select id="reliabilities-max-filter" class="reliabilities-filter" placeholder="to">
                                        <option value="">to</option>
                                        {% for reliability in reliabilities %}
                                        <option value="{{reliability.level}}">{{reliability}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label>Severity</label>
                            <div class="row">
                                <div class="col-md-6">
                                    <select id="severities-min-filter" class="severities-filter" placeholder="from">
                                        <option value="">from</option>
                                        {% for severity in severities %}
                                        <option value="{{severity.level}}">{{severity}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <select id="severities-max-filter" class="severities-filter" placeholder="to">
                                        <option value="">to</option>
                                        {% for severity in severities %}
                                        <option value="{{severity.level}}">{{severity}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="entries">
        </div>
    </div>
</section>

<div class="entry-template" hidden>
    <div class="row">
        <div class="col-md-8">
            <h2 class="entry-title"></h2>
            <p class="entry-title-extra">
                <i class="fa fa-user"></i><span class="created-by">frozen helium</span>
                <i class="fa fa-calendar"></i><date class="created-on">2015-10-12</date>
            </p>
        </div>
        <div class="col-md-4">
            <a class="fa fa-trash delete-btn btn btn-danger btn-action" onmouseover="$(this).tooltip('show')" data-toggle="tooltip" data-placement="bottom" title="Delete Entry"></a>
            <a class="fa fa-edit edit-btn btn btn-info btn-action" onmouseover="$(this).tooltip('show')" style="margin-right: 0;" data-toggle="tooltip" data-placement="bottom" title="Edit Entry"></a>
        </div>
    </div>
    <div class="information-list">
    </div>
</div>

<div class="information-template" hidden>
    <div class="row">
        <div class="col-md-3">
            <p class="excerpt" ></p>
        </div>
        <div class="col-md-1">
            <div class="reliability">
                <label>Reliability </label><br>
                {% for reliability in reliabilities %}
                <span data-id="{{reliability.pk}}" class="_{{reliability.level}}" onmouseover="$(this).tooltip('show')" data-toggle="tooltip" data-placement="bottom" title="{{reliability}}"></span>
                {% endfor %}
            </div>
            <div class="severity">
                <label>Severity </label><br>
                {% for severity in severities %}
                <span data-id="{{severity.pk}}" class="_{{severity.level}}" onmouseover="$(this).tooltip('show')" data-toggle="tooltip" data-placement="bottom" title="{{severity}}"></span>
                {% endfor %}
            </div>
        </div>
        <div class="col-md-1">
            <p><label>Date:</label><br><span class="date"></span></p>
            <p><label>Number:</label><br><span class="number"></span></p>
        </div>
        <div class="col-md-2">
            <div class="vulnerable-group"><label>Vunerable groups:</label><br><span class="vulnerable-groups"></span></div>
            <div class="specific-need-group"><label>Specific need groups:</label></br><span class="sepecific-need-groups"></span></div>
        </div>
        <div class="col-md-5">
            <div class="row">
                <div class="col-md-5">
                    <div class="affected-group">
                        <label>Affected groups:</label>
                        <div class="affected-group-list"></div>
                    </div>
                    <div class="geo-location">
                        <label>Geo locations:</label>
                        <div class="geo-locations-list"></div>
                    </div>
                </div>
                <div class="col-md-7">
                    <label>Pillar / Sub-pillar</label>
                    <div class="attribute-list">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="attribute-template" hidden>
    <div class="row">
        <div class="col-md-6">
            <span class="pillar"></span> <br> <span class="sub-pillar"></span>
        </div>
        <div class="col-md-6">
            <span class="sector"></span> <br> <span class="sub-sector"></span>
        </div>
    </div>
</div>
{% endblock %}
