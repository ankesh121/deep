{% extends 'base.html' %}
{% load watchful_url %}

{% block title %}
DEEP | Export
{% endblock %}

{% block head %}
<script>
    var currentEvent = {{event.pk}};
    var heirarchy = [];
</script>
<link href="{% watchful_static_url 'css/jquery-ui.min.css' %}" type="text/css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="{% watchful_static_url 'css/selectize.css' %}"/>
<link href="{% watchful_static_url 'css/modal.css' %}" type="text/css" rel="stylesheet">
<link href="{% watchful_static_url 'css/export.css' %}" type="text/css" rel="stylesheet">
<script type="text/javascript" src="{% watchful_static_url 'js/common/selectize.js' %}"></script>
<script type="text/javascript" src="{% watchful_static_url 'js/common/modal.js' %}"></script>
<script type="text/javascript" src="{% watchful_static_url 'js/common/utils.js' %}"></script>
<script type="text/javascript" src="{% watchful_static_url 'js/common/jquery-ui.min.js' %}"></script>
<script type="text/javascript" src="{% watchful_static_url 'js/entries/export.js' %}"></script>

<script>
    var eventId = "{{event.pk}}";
</script>

{% endblock %}

{% block body %}

{% include 'navbar.html' %}

<aside id="preview-section">
    <div>No preview available</div>
    <iframe src="about:blank" hidden></iframe>
</aside>

<main>
    <section id="entries-export">
        <h2>Entries</h2>
        <div>
            <form id="export-entries-doc-form" action="{% url 'entries:exportdocx' event=event.pk %}">
                <div>
                    <h4>Filters</h4>
                    <div class="filters">
                        {% include 'entries/export-entry-filters.html' %}
                        <div class="filter-group">
                            <header>
                                <h5>Leads:</h5>
                            </header>
                            <div class="filters-container">
                                {% include 'entries/export-leads.html' %}
                            </div>
                        </div>
                    </div>
                </div>

                <div id="action-section">
                    <div>
                        <div class="export-format">
                            <label class="active"><input type="radio" name="export-format" value="generic" checked> Generic</label>
                            <label><input type="radio" name="export-format" value="geo"> Geo</label>
                            <label><input type="radio" name="export-format" value="briefing"> Briefing note</label>
                        </div>
                        <div class="action-buttons">
                            <button class="btn-pdf" id="export-pdf" type="button"><i class="fa fa-file-pdf-o"></i>Export pdf</button>
                            <button class="btn-word" id="export-docx" type="button"><i class="fa fa-file-word-o"></i>Export docx</button>
                            <button class="btn-word" id="preview-docx" type="button"><i class="fa fa-file-word-o"></i>Preview docx</button>
                        </div>
                    </div>
                    <div>
                        <button class="btn-excel" id="export-xlsx" onclick="window.location.href = '{% url 'entries:exportxls' event=event.pk %}'"><i class="fa fa-file-excel-o"></i>Export xlsx</button>
                    </div>
                </div>
            </form>
        </div>
        <!-- <div class="excel-export">
            <h3>Excel Export</h3>
            <div class="content">
                <form action="{% url 'entries:exportxls' event=event.pk %}">
                    <button type="submit" class="btn-excel"><i class="fa fa-file-excel-o"></i>Export xlsx</button>
                </form>
            </div>
        </div> -->
    </section>
    <section>
        <h2>Assessment Registry</h2>
        <div class="content">
            <button href="{% url 'leads:exportsosxls' event=event.pk %}" type="submit" class="btn-excel"><i class="fa fa-file-excel-o"></i>Export xlsx</button>
        </div>
    </section>
    <section>
        <h2>Weekly snapshot</h2>
        <div class="content">
            <form action="{% url 'entries:exportxls_weekly' event=event.pk %}">
                <button type="submit" class="btn-excel"><i class="fa fa-file-excel-o"></i>Export xlsx</button>
            </form>
        </div>
    </section>
</main>


<div class="modal-container" hidden>
<div id="date-range-input" class="modal" hidden>
    <header>
        <h3 class="modal-title">Enter date range</h3>
    </header>
    <div class="input-container">
        <label>start date:</label>
        <input type="date" id="start-date" class="form-control">
    </div>
    <div class="input-container">
        <label>end date:</label>
        <input type="date" id="end-date" class="form-control">
    </div>
    <div class="action-buttons">
        <button id="cancel-btn" class="cancel" data-action="dismiss"><i class="fa fa-times"></i>Cancel</button>
        <button id="ok-btn" class="success" data-action="proceed"><i class="fa fa-check"></i>Ok</button>
    </div>
</div>

{% endblock %}
