{% extends 'base.html' %}
{% load staticfiles %}

{% block title %}
DEEP | {% if lead %}Edit{% else %}Add{% endif %} Lead
{% endblock %}

{% block head %}
<link href="{% static 'css/add-lead.css' %}" type="text/css" rel="stylesheet">
<link href="{% static 'css/add-sos.css' %}" type="text/css" rel="stylesheet">
<link href="{% static 'css/navigation-bar.css' %}" type="text/css" rel="stylesheet">
<link href="{% static 'css/split-pane.css' %}" type="text/css" rel="stylesheet">

<script src="{% static 'js/split-pane.js' %}"></script>
<script src="{% static 'js/utils.js' %}"></script>

<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css">
<link rel="stylesheet" href="{% static 'css/leaflet.label.css' %}" >
<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
<script src="{% static 'js/leaflet.label.js' %}"></script>

<style>
    html, body {
        height: 100%;
        min-height: 100%;
        margin: 0;
        padding: 0;
    }
    .split-pane-divider {
        background: #aaa;
    }
    #left-component {
        width: 500px;
    }
    #my-divider {
        left: 500px; /* Same as left component width */
        width: 5px;
    }
    #right-component {
        left: 500px;  /* Same as left component width */
        margin-left: 5px;  /* Same as divider width */
    }

    #lead-preview-container {
        height: calc(100% - 70px);
    }
    #lead-preview {
        width: 100%;
        height: 100%;
        display: none;
    }
</style>

<script>
    // Is simplified option selected?
    var isSimplified;
    // Simplified version of the lead.
    var leadSimplified = "{% if lead_simplified %}{{lead_simplified|escapejs}}{% endif %}";
    leadSimplified = leadSimplified.replace(/(?:\r\n|\r|\n)/g, '<br />');

</script>

{% endblock %}

{% block body %}

{% include 'navigation-bar.html' %}

<div class="split-pane fixed-left">
    <div class="split-pane-component" id="left-component">
        {% if lead_simplified %}
        <div id="lead-options-container">
            <div class="btn-group" data-toggle="buttons" {% if lead.lead_type == 'MAN' %} style="display:none;" {% endif %}>
                <label class="btn btn-default radio-inline active"><input type="radio" name="lead-view-option" value="simplified" checked>Simplified</label>
                <label class="btn btn-default radio-inline"><input type="radio" name="lead-view-option" value="original">Original</label>
            </div>
        </div>
        {% endif %}

        <div id="lead-preview-container">
            {% if lead.lead_type == 'URL' %}
            <iframe id="lead-preview" src="{{ lead.url }}"></iframe>
            {% elif lead.lead_type == 'ATT' %}
            <iframe id="lead-preview" src="{{ lead.attachment.upload.url}}"></iframe>
            {% endif %}
            <div id="lead-simplified-preview">{{lead_simplified|safe|escape}}</div>
        </div>
    </div>
    <div class="split-pane-divider" id="my-divider"></div>
    <div class="split-pane-component" id="right-component">
        <div class="title">Survey of Survey</div>
        <form>
            <div>
                <div class="row">
                    <div class="col-md-3">
                        <input type="text" class="form-control" name="assesment-title"  placeholder="Title of assessment">
                        <input type="text" class="form-control " name="lead-organization"  placeholder="Lead Organization">
                        <input type="text" class="form-control" name="other-assesment-partners"  placeholder="Other assessment partners">
                        <input type="text" class="form-control " name="assesment-frequency" placeholder="Assessment Frequency">
                        <input type="text" class="form-control" name="assesment-status" placeholder="Assessment Status">
                        <input type="text" class="form-control " name="assesment-confidentiality" placeholder="Assessment Confidentiality">
                    </div>
                    <div class="col-md-6">
                        <div id="the-map" style="height:300px;"></div>
                    </div>
                    <div class="col-md-3">
                        <input type="text" class="form-control" name="source-proximity"  placeholder="Proximity to the source">
                        <input type="text" class="form-control" name="analysis-unit"  placeholder="Unit of analysis">
                        <input type="text" class="form-control" name="start-of-field"  placeholder="Start of field data collection">
                        <input type="text" class="form-control" name="end-of-field"  placeholder="End of field data collection">
                        <input type="text" class="form-control" name="sampling-type" placeholder="Sampling type">
                    </div>
                </div>
            </div>
            <div id="sector-block">
                <div class="row">
                    <div class="col-md-12">
                        <div class="block-title">
                            Sectors covered by the assesment
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3">
                        <div id="sectors">
                        </div>
                    </div>
                    <div class="col-md-6 col-md-offset-1">
                        <div id="sector-input">
                            <div class="title"></div>
                            <div class="group">
                                <label>Quantification</label>
                                <input type=text class="form-control" placeholder="Quantification" id="quantification">
                            </div>
                            <div class="group">
                                <label>Analytical value</label>
                                <input type=text class="form-control" placeholder="Analytical Value" id="analytical-value">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="action-block">
                <div class="row">
                    <div class="col-md-12">
                        <input type="submit" class="btn btn-default">
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

<script src="{% static 'js/add-sos.js' %}"></script>
<script src="{% static 'js/add-entry-map.js' %}"></script>
{% endblock %}
