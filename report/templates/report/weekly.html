{% extends 'base.html' %}
{% load staticfiles %}

{% block title %}
DEEP | Weekly Report
{% endblock %}

{% block head %}
<link href="{% static 'css/report-weekly.css' %}" type="text/css" rel="stylesheet">
<link href="{% static 'css/selectize.css' %}" type="text/css" rel="stylesheet">
<link href="{% static 'css/selectize.bootstrap3.css' %}" type="text/css" rel="stylesheet">
<script src="{% static 'js/report-weekly.js' %}"></script>
<script src="{% static 'js/selectize.js' %}"></script>

<script>
    {% if report %}

    var data = JSON.parse("{{report.data|escapejs}}");

    {% else %}

    var data = {};
    data["human"] = { "number": {}, "source": {}, "comment": {}};

    {% endif %}
</script>
{% endblock %}

{% block body %}
{% include 'navbar.html' %}
<section id="main">
    <div class="container-fluid">
        <header>
            <h2>
                {% if report %}Edit{% else %}Add{% endif %} Weekly Report / <small>{{event}}</small>
            </h2>
            <div id="filters">
                <div class="row">
                    <div class="col-md-1">
                        <label>Apply filters:</label>
                    </div>
                    <div class="col-md-2">
                        <select class="filter">
                            <option>Option #1</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <select class="filter">
                            <option>Option #1</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <select class="filter">
                            <option>Option #1</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <select class="filter">
                            <option>Option #1</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <select class="filter">
                            <option>Option #1</option>
                        </select>
                    </div>
                </div>
            </div>
        </header>
        <div class="row">
            <div class="col-md-4">
                <div id="entries">
                    {% for entry in entries %}
                    <div class="entry">
                        <h5>Entry #{{forloop.counter}}</h5>
                        {% for data in entry.attributedata_set.all %}
                        <p>{{data.excerpt}}</p> <span>{{data.reliability}}</span> <span>{{data.severity}}</span>
                        {% endfor %}
                    </div>
                    {% if not forloop.last %}<hr>{% endif %}
                    {% endfor %}
                    <!--div class="entry">
                        <h5>Entry #1</h5>
                        <p>some details stuff goes here, and you will read this, and you will yawn now</p>
                        <p class="details" hidden>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                    </div>
                    <hr>
                    <div class="entry">
                        <h5>Entry #2</h5>
                        <p>some details stuff goes here, and you will read this, and you will yawn now (at least khatri thinks so)</p>
                        <p class="details" hidden>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                    </div>
                    <hr>
                    <div class="entry">
                        <h5>Entry #3</h5>
                        <p>some details stuff goes here, and you will read this, and you will yawn now (nah! just kidding)</p>
                        <p class="details" hidden>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                    </div>
                    <hr>
                    <div class="entry">
                        <h5>Entry #4</h5>
                        <p>some details stuff goes here, and you will read this, and you will yawn now (nah! just kidding)</p>
                        <p class="details" hidden>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                    </div>
                    <hr>
                    <div class="entry">
                        <h5>Entry #5</h5>
                        <p>some details stuff goes here, and you will read this, and you will yawn now (nah! just kidding)</p>
                        <p class="details" hidden>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                    </div>
                    <hr>
                    <div class="entry">
                        <h5>Entry #6</h5>
                        <p>some details stuff goes here, and you will read this, and you will yawn now (nah! just kidding)</p>
                        <p class="details" hidden>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                    </div-->
                </div>
            </div>
            <div class="col-md-8">
                <div id="report-content">
                    <div id="navigator">
                        <a href="#key-events">Key events</a>
                        <a href="#humanitarian-profile">Humanitarian profile</a>
                        <a href="#people-in-need">People in need</a>
                        <a href="#humanitarian-access">Humanitarian access</a>
                        <hr>
                    </div>
                    <section id="key-events">
                        <h3>Key Events</h3>
                        <h4>Key events this week:</h4>
                        <div class="row">
                            <div class="col-md-6">
                                <select id="disaster-type-select" placeholder="Select type of disaster">
                                    <option>Earthquake</option>
                                    <option>Ground Shaking</option>
                                    <option>Tsunami</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <select id="status-select" placeholder="Select status">
                                    <option>Earthquake</option>
                                    <option>Ground Shaking</option>
                                    <option>Tsunami</option>
                                </select>
                            </div>
                        </div>
                        <br>
                        <div class="row">
                            <div class="col-md-12">
                                <h4>Events for timeline:</h4>
                                <div id="event-timeline-container">
                                </div>
                            </div>
                        </div>
                        <div class="event-timeline-template" hidden>
                            <div class="row">
                                <div class="col-md-9">
                                    <input class="form-control">
                                </div>
                                <div class="col-md-3">
                                    <button class="btn btn-default">+</button>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3">
                                    <label>start date:</label>
                                    <input type="date" class="form-control">
                                </div>
                                <div class="col-md-3">
                                    <label>end date:</label>
                                    <input type="date" class="form-control">
                                </div>
                                <div class="col-md-3">
                                    <label></label>
                                    <select class="category-select" placeholder="Select Category">
                                        <option>this</option>
                                    </select>
                                </div>
                            </div>
                            <br>
                        </div>
                    </section>
                    <section id="humanitarian-profile">
                        <h3>Humanitarian Profile</h3>
                        {% for field in human_profile_fields %}

                        <div class="row">
                            <div class="col-md-6"><label>{{field.name}}</label></div>
                            <div class="col-md-2"><input class="human-number form-control" data-human-pk="{{field.pk}}" placeholder="Number of person"></div>
                            <div class="col-md-2"><input class="human-source form-control" data-human-pk="{{field.pk}}" placeholder="Source/Date"></div>
                            <div class="col-md-2"><input class="human-comment form-control" data-human-pk="{{field.pk}}" placeholder="Comment"></div>
                        </div>

                        {% for subfield in field.humanprofilefield_set.all %}

                        <div class="row">
                            <div class="col-md-6"><label  class="sub">{{subfield.name}}</label></div>
                            <div class="col-md-2"><input class="human-number form-control" data-human-pk="{{subfield.pk}}" placeholder="Number of person"></div>
                            <div class="col-md-2"><input class="human-source form-control" data-human-pk="{{subfield.pk}}" placeholder="Source/Date"></div>
                            <div class="col-md-2"><input class="human-comment form-control" data-human-pk="{{subfield.pk}}" placeholder="Comment"></div>
                        </div>

                        {% endfor %}
                        {% endfor %}
                    </section>
                    <section id="people-in-need">
                    </section>
                    <section id="humanitarian-access">
                    </section>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
